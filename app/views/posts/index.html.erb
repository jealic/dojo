<div class="container">
  <div class="margin-top-50">
    <h1 class="page-title-h1">World Wild</h1>  
  </div>
  <div style="margin-top: 30px;">
    <% @categories.each do |c| %>  
      <span><button class="category-tag"><%= c.name %></button></span>  
    <% end %>
  </div>
  <br>

  <div class="">
    <table class="table">
      <thead class="thead-light thin-font">
        <tr>
          <th class="text-center">Replies Count</th>
          <th>Title</th>
          <th class="text-center">Last Replied at</th>
          <th class="text-center">Viewed Count</th>
        </tr>
      </thead>
      
      <tbody>
        <% @posts.each do |p| %>
          <tr>

            <td class="text-center"><%= p.replies_count %></td>
            <td>
              <b><%= link_to p.title, post_path(p) %></b>
              <% p.categories.each do |category| %>
                <%= link_to category.name, root_path, class: "badge index-badge" %>
              <% end %>
            </td>
            <!-- 印出本 post 最後的 reply 的 建立時間 -->
            <td class="text-center">
              <% if p.replies.present? %>
                <%= p.replies.last.created_at.strftime("%Y-%m-%d %H:%M:%S") %>
              <% else %>
                <span style="color: gray;">No replies yet</span>
              <% end %>                
            </td>
            <td class="text-center"><%= fa_icon 'eye' %> <%= p.viewed_count %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  <br>
  <%= paginate @posts %>     
</div>